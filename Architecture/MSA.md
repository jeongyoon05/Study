# MSA

#### 모놀리지 아키텍쳐
![image](https://user-images.githubusercontent.com/81298238/174750828-2204ede7-d0e5-4add-a2e5-bc305f938b1d.png)

#### 마이크로서비스 아키텍처
![image](https://user-images.githubusercontent.com/81298238/174751268-cc3138b4-c7a6-480d-baa9-5d4372e8f04d.png)

MSA란 마이크로 서비스 아키텍처의 약자로 단일 프로그램을 각 컴포넌트 별로 나누어서 작은 서비스의 조합으로 구축하는 방법이다.

![leh_4](http://clipsoft.co.kr/wp/wp-content/uploads/2020/06/leh_4.png)

각 컴포넌트는 서비스 형태로 구현되고 API를 이용하여 타 서비스와 통신하게 된다.

각 서비스는 독립된 서버로 타 컴포넌트와 의존성이 없기 때문에 독립된 배포를 하게 된다. 

또한 각 컴포넌트가 독립된 서비스로 개발되어있기 때문에 부분적인 확장이 가능하다.

온라인 쇼핑몰에서 주문 서비스에 트래픽이 증가한다면 해당 서버만 확장을 해주면 된다.



#### 데이터 분리

데이터 저장 시 하나의 DB에 중앙 집중화를 하지 않고 서비스 별 별도의 데이터 베이스를 사용한다. DB의 종류를 별도로 가져 갈 수도 있고, 같은 DB를 사용하더라도 나누어서 사용하게 된다. 데이터가 분산되어있기 때문에 다른 서비스 컴포넌트에 대한 의존성이 없이 서비스를 독립적으로 개발 및 배포/운영 할 수 있지만, 다른 컴포넌트의 데이터를 API통신을 통해 가져와야 하기 때문에 성능상의 문제가 발생 할 수 있고, 트랜젝션으로 묶을 수 없는 문제가 발생하기도 한다.  

#### API Gateway

MSA의 문제점 중 하나는 각 서비스가 다른 서버에 분리 배포 되어 있기 때문에 서버 URL이 각기 다를 수 밖에 없다. 이때 API Gateway는 API 서버 앞 단에서 모든 API 서버들을 End-Point를 단일화하여 묶어주는 역할을 한다. 또한 거미줄처럼 복잡한 서비스간의 API 호출 구조도 단순화 시켜준다. 그외에 라우팅, 로드밸런싱, 인증 역할 등등 여러 역할을 수행한다.



- 라우팅 - 네트워크 안에서 통신 데이터를 보낼 최적의 경로를 선택하는 과정이다.

- 로드밸런싱 - 여러건의 요청을 하나의 서버로 응답하는것이 아닌 여러대의 서버로 나누어 요청을 보냄으로써 빠른 응답 속도를 기대할 수 있도록 해주는 기술이다.

